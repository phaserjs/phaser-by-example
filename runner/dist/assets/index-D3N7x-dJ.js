import{P as e}from"./phaser-CmFXOKba.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t extends Phaser.GameObjects.Rectangle{constructor(e,t,s,i){super(e,t,s,32,32,65280),this.setOrigin(.5),this.scene.add.existing(this),this.scene.physics.add.existing(this),this.body.collideWorldBounds=!0,this.setScale(1),this.jumping=!1,this.invincible=!1,this.health=10,this.body.mass=10,this.body.setDragY=10}}class s{constructor(e){this.scene=e,this.scene.time.delayedCall(2e3,(()=>this.init()),null,this),this.pinos=0}init(){this.generateCloud(),this.generateObstacle(),this.generateCoin()}generateCloud(){new i(this.scene),this.scene.time.delayedCall(Phaser.Math.Between(2e3,3e3),(()=>this.generateCloud()),null,this)}generateObstacle(){this.scene.obstacles.add(new a(this.scene,800,this.scene.height-Phaser.Math.Between(32,128))),this.scene.time.delayedCall(Phaser.Math.Between(1500,2500),(()=>this.generateObstacle()),null,this)}generateCoin(){this.scene.coins.add(new h(this.scene,800,this.scene.height-Phaser.Math.Between(32,128))),this.scene.time.delayedCall(Phaser.Math.Between(500,1500),(()=>this.generateCoin(1)),null,this)}}class i extends Phaser.GameObjects.Rectangle{constructor(e,t,s){super(e,t,s||Phaser.Math.Between(0,100),98,32,16777215),e.add.existing(this);const i=1/Phaser.Math.Between(1,3);this.setScale(i),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:800,to:-100},duration:2e3/this.scale,onComplete:()=>{this.destroy()}})}}class a extends Phaser.GameObjects.Rectangle{constructor(e,t,s){super(e,t,s,32,32,16711680),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1),Phaser.Math.Between(1,3),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}})}}class h extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s,"coin"),e.add.existing(this),e.physics.add.existing(this),this.body.setAllowGravity(!1),Phaser.Math.Between(1,3),this.init()}init(){this.scene.tweens.add({targets:this,x:{from:820,to:-100},duration:2e3,onComplete:()=>{this.destroy()}}),this.scene.anims.create({key:"coin",frames:this.scene.anims.generateFrameNumbers("coin",{start:0,end:7}),frameRate:8}),this.play({key:"coin",repeat:-1})}}class n extends Phaser.Scene{constructor(){super({key:"game"}),this.player=null,this.score=0,this.scoreText=null}init(e){this.name=e.name,this.number=e.number}preload(){this.registry.set("score","0"),this.load.audio("coin","assets/sounds/coin.mp3"),this.load.audio("jump","assets/sounds/jump.mp3"),this.load.audio("dead","assets/sounds/dead.mp3"),this.load.audio("theme","assets/sounds/theme.mp3"),this.load.spritesheet("coin","./assets/images/coin.png",{frameWidth:32,frameHeight:32}),this.load.bitmapFont("arcade","assets/fonts/arcade.png","assets/fonts/arcade.xml"),this.score=0}create(){this.width=this.sys.game.config.width,this.height=this.sys.game.config.height,this.center_width=this.width/2,this.center_height=this.height/2,this.cameras.main.setBackgroundColor(8900331),this.obstacles=this.add.group(),this.coins=this.add.group(),this.generator=new s(this),this.SPACE=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.player=new t(this,this.center_width-100,this.height-200),this.scoreText=this.add.bitmapText(this.center_width,10,"arcade",this.score,20),this.physics.add.collider(this.player,this.obstacles,this.hitObstacle,(()=>!0),this),this.physics.add.overlap(this.player,this.coins,this.hitCoin,(()=>!0),this),this.loadAudios(),this.playMusic(),this.input.on("pointerdown",(e=>this.jump()),this),this.updateScoreEvent=this.time.addEvent({delay:100,callback:()=>this.updateScore(),callbackScope:this,loop:!0})}hitObstacle(e,t){this.updateScoreEvent.destroy(),this.finishScene()}hitCoin(e,t){this.playAudio("coin"),this.updateScore(1e3),t.destroy()}loadAudios(){this.audios={jump:this.sound.add("jump"),coin:this.sound.add("coin"),dead:this.sound.add("dead")}}playAudio(e){this.audios[e].play()}playMusic(e="theme"){this.theme=this.sound.add(e),this.theme.stop(),this.theme.play({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!0,delay:0})}update(){var e;Phaser.Input.Keyboard.JustDown(this.SPACE)?this.jump():this.player.body.blocked.down&&(null==(e=this.jumpTween)||e.stop(),this.player.rotation=0)}jump(){this.player.body.blocked.down&&(this.player.body.setVelocityY(-300),this.playAudio("jump"),this.jumpTween=this.tweens.add({targets:this.player,duration:1e3,angle:{from:0,to:360},repeat:-1}))}finishScene(){this.theme.stop(),this.playAudio("dead"),this.registry.set("score",""+this.score),this.scene.start("gameover")}updateScore(e=1){this.score+=e,this.scoreText.setText(this.score)}}class r extends Phaser.Scene{constructor(){super({key:"gameover"})}create(){this.width=this.sys.game.config.width,this.height=this.sys.game.config.height,this.center_width=this.width/2,this.center_height=this.height/2,this.cameras.main.setBackgroundColor(8900331),this.add.bitmapText(this.center_width,50,"arcade",this.registry.get("score"),25).setOrigin(.5),this.add.bitmapText(this.center_width,this.center_height,"arcade","GAME OVER",45).setOrigin(.5),this.add.bitmapText(this.center_width,250,"arcade","Press SPACE or Click to restart!",15).setOrigin(.5),this.input.keyboard.on("keydown-SPACE",this.startGame,this),this.input.on("pointerdown",(e=>this.startGame()),this)}showLine(e,t){let s=this.introLayer.add(this.add.bitmapText(this.center_width,t,"pixelFont",e,25).setOrigin(.5).setAlpha(0));this.tweens.add({targets:s,duration:2e3,alpha:1})}startGame(){this.scene.start("game")}}const o={width:600,height:300,scale:{mode:e.Scale.FIT,autoCenter:e.Scale.CENTER_BOTH},autoRound:!1,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{y:350},debug:!0}},scene:[n,r]};new e.Game(o);
